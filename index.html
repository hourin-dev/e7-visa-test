<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-7-4 ë¹„ì ì ìˆ˜ ê³„ì‚°ê¸° (ìƒì„¸ ì…ë ¥)</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; padding: 15px; background-color: #f0f4f7; }
        .container { background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); max-width: 450px; margin: 0 auto; }
        h1 { text-align: center; color: #004d99; }
        h2 { color: #004d99; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px; margin-top: 20px; font-size: 1.2em; }
        label { display: block; margin-top: 15px; font-weight: bold; color: #333; }
        input[type="number"], select { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        small { color: #888; font-size: 0.85em; margin-top: 3px; display: block; }

        /* ì²´í¬ë°•ìŠ¤/ë¼ë””ì˜¤ ë²„íŠ¼ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ */
        .checkbox-group { display: flex; align-items: center; margin-top: 10px; }
        .checkbox-group input { width: auto; margin-right: 10px; }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .button-group button { width: 100%; padding: 12px; margin-top: 15px; border: none; border-radius: 6px; cursor: pointer; font-size: 1.1em; transition: background-color 0.3s; }
        #calculateButton { background-color: #007bff; color: white; }
        #calculateButton:hover { background-color: #0056b3; }
        #newInputButton { background-color: #6c757d; color: white; }
        #newInputButton:hover { background-color: #5a6268; }

        /* ê²°ê³¼ ì˜ì—­ ìŠ¤íƒ€ì¼ (ì´ì „ê³¼ ë™ì¼) */
        #results { margin-top: 25px; padding: 15px; border: 1px solid #004d99; border-radius: 8px; background-color: #e9f7ff; }
        .final-score { font-size: 1.4em; font-weight: bold; color: #cc0000; margin: 10px 0; }
        .eligibility { font-size: 1.2em; font-weight: bold; padding: 10px; border-radius: 4px; text-align: center; margin-top: 15px; }
        .eligible { background-color: #d4edda; color: #155724; }
        .not-eligible { background-color: #f8d7da; color: #721c24; }
        .detail-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9em; }
        .detail-table th, .detail-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .detail-table th { background-color: #f0f0f0; }
        .status-ok { color: #28a745; font-weight: bold; }
        .status-fail { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>E-7-4 ë¹„ì ì ìˆ˜ ê³„ì‚°ê¸°</h1>
        <small style="text-align: center; display: block; color: red;">â€» ì ìˆ˜ ê¸°ì¤€ì€ ë²•ë¬´ë¶€ ê³ ì‹œì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</small>
        
        <div id="input-area">
            <h2>1. ê¸°ë³¸ í•­ëª© (ìë™ ê³„ì‚°)</h2>
            <label for="income">ì—°ê°„ í‰ê·  ì†Œë“ (ì›, ìµœê·¼ 2ë…„ í‰ê· ):</label>
            <input type="number" id="income" value="30000000" min="0">
            <small>â€» ìµœì†Œ 2,500ë§Œì› ì´ìƒ í•„ìˆ˜ (50ì )</small>

            <label for="korean_level">í•œêµ­ì–´ ëŠ¥ë ¥ (TOPIK/KIIP ë‹¨ê³„):</label>
            <input type="number" id="korean_level" value="3" min="1" max="5">
            <small>â€» ìµœì†Œ 2ê¸‰/2ë‹¨ê³„ ì´ìƒ í•„ìˆ˜ (50ì )</small>

            <label for="age">ë§Œ ë‚˜ì´:</label>
            <input type="number" id="age" value="30" min="19">

            <h2>2. ì„ íƒ í•­ëª© (í•­ëª©ë³„ ì„ íƒ, ìµœëŒ€ 60ì )</h2>
            
            <label for="education">í•™ë ¥ (êµ­ë‚´ í•™ìœ„ ë˜ëŠ” í•´ì™¸ ëª…ë¬¸ëŒ€):</label>
            <select id="education">
                <option value="0">ì„ íƒ ì•ˆí•¨</option>
                <option value="10">êµ­ë‚´ ì „ë¬¸í•™ì‚¬</option>
                <option value="15">êµ­ë‚´ í•™ì‚¬</option>
                <option value="20">êµ­ë‚´ ì„ì‚¬ ì´ìƒ</option>
            </select>

            <label for="assets">êµ­ë‚´ ìì‚° ë³´ìœ  ì—¬ë¶€:</label>
            <select id="assets">
                <option value="0">ì„ íƒ ì•ˆí•¨ (0ì )</option>
                <option value="20">ë³¸ì¸ ë˜ëŠ” ë°°ìš°ì ëª…ì˜ êµ­ë‚´ ìì‚° (3ì²œë§Œ ì› ì´ìƒ) (20ì )</option>
            </select>

            <label for="experience">ê´€ë ¨ ë¶„ì•¼ ê²½ë ¥:</label>
            <select id="experience">
                <option value="0">ì„ íƒ ì•ˆí•¨</option>
                <option value="10">1ë…„ ì´ìƒ ~ 3ë…„ ë¯¸ë§Œ (10ì )</option>
                <option value="15">3ë…„ ì´ìƒ ~ 5ë…„ ë¯¸ë§Œ (15ì )</option>
                <option value="20">5ë…„ ì´ìƒ (20ì )</option>
            </select>
            
            <h2>3. ê°€ì  í•­ëª© (í•­ëª©ë³„ ì„ íƒ, ìµœëŒ€ 35ì  ì´ìƒ)</h2>

            <label for="kiip">ì‚¬íšŒí†µí•©í”„ë¡œê·¸ë¨ (KIIP) ì´ìˆ˜:</label>
            <select id="kiip">
                <option value="0">ì„ íƒ ì•ˆí•¨ (0ì )</option>
                <option value="5">KIIP 4ë‹¨ê³„ ì´ìˆ˜ (5ì )</option>
                <option value="10">KIIP 5ë‹¨ê³„ ì´ìˆ˜ (10ì )</option>
            </select>
            
            <div class="checkbox-group">
                <input type="checkbox" id="domestic_study" value="5">
                <label for="domestic_study">êµ­ë‚´ ìœ í•™ ê²½í—˜ (5ì )</label>
            </div>
            
            <div class="checkbox-group">
                <input type="checkbox" id="certificate" value="5">
                <label for="certificate">êµ­ë‚´ ê³µì¸ ìê²©ì¦/ë©´í—ˆ ë³´ìœ  (5ì )</label>
            </div>
            
            <div class="checkbox-group">
                <input type="checkbox" id="recommendation" value="5">
                <label for="recommendation">ì£¼ë¬´ ë¶€ì²˜ì˜ ê³ ìš© ì¶”ì²œì„œ (5ì )</label>
            </div>

            <label for="long_term">ë™ì¼ ì‚¬ì—…ì¥ ì¥ê¸° ê·¼ì†:</label>
            <select id="long_term">
                <option value="0">ì„ íƒ ì•ˆí•¨ (0ì )</option>
                <option value="5">3ë…„ ì´ìƒ ~ 4ë…„ ë¯¸ë§Œ (5ì )</option>
                <option value="10">4ë…„ ì´ìƒ (10ì )</option>
            </select>
            
            <h2>4. ê°ì  í•­ëª© (í•´ë‹¹ ì‹œ ì„ íƒ, ìµœëŒ€ -50ì )</h2>

            <label for="violation_count">ì¶œì…êµ­ê´€ë¦¬ë²• ìœ„ë°˜ íšŸìˆ˜ (ìµœê·¼ 3ë…„ê°„):</label>
            <input type="number" id="violation_count" value="0" min="0" max="4">
            <small>â€» 4íšŒ ì´ìƒì€ ë¶ˆí—ˆ ì‚¬ìœ  (ê°ì  -50ì )</small>
            
            <div class="checkbox-group">
                <input type="checkbox" id="crime_penalty" value="50">
                <label for="crime_penalty">êµ­ë‚´ í˜•ì‚¬ ë²”ì£„ ì´ë ¥ (ë²Œê¸ˆí˜• ì´ìƒ) (-50ì )</label>
            </div>

            <div class="button-group">
                <button id="calculateButton" onclick="calculateScore()">E-7-4 ì ìˆ˜ ê³„ì‚°í•˜ê¸°</button>
            </div>
        </div>

        <div id="results" style="display:none;">
            <h2>5. ê³„ì‚° ê²°ê³¼ ë° ì§„ë‹¨</h2>
            <div id="score_details"></div>
            
            <div class="final-score">ì´ í•©ì‚° ì ìˆ˜: <span id="final_score_value">0</span>ì </div>
            <div id="eligibility_status" class="eligibility"></div>
            
            <button id="newInputButton" onclick="resetForm()">New (ìƒˆ ì…ë ¥ ì‹œì‘)</button>
        </div>
    </div>

    <script>
        // ì´ˆê¸° ì…ë ¥ê°’ ì„¤ì •
        const initialValues = {
            income: 30000000,
            korean_level: 3,
            age: 30,
            violation_count: 0
        };

        // E-7-4 ì ìˆ˜ ê³„ì‚° í•¨ìˆ˜
        function calculateScore() {
            // ==========================================================
            // 1. ê¸°ë³¸ í•­ëª© ì ìˆ˜ ê³„ì‚° (ì†Œë“, í•œêµ­ì–´, ë‚˜ì´)
            // ==========================================================
            const income = parseInt(document.getElementById('income').value) || 0;
            const koreanLevel = parseInt(document.getElementById('korean_level').value) || 0;
            const age = parseInt(document.getElementById('age').value) || 0;
            
            let incomeScore = 0;
            if (income >= 40000000) incomeScore = 120;
            else if (income >= 35000000) incomeScore = 90;
            else if (income >= 30000000) incomeScore = 70;
            else if (income >= 25000000) incomeScore = 50;

            let koreanScore = 0;
            if (koreanLevel >= 4) koreanScore = 120;
            else if (koreanLevel === 3) koreanScore = 80;
            else if (koreanLevel === 2) koreanScore = 50;

            let ageScore = 0;
            if (age >= 19 && age <= 26) ageScore = 60;
            else if (age >= 27 && age <= 33) ageScore = 50;
            else if (age >= 34 && age <= 40) ageScore = 30;
            else if (age >= 41) ageScore = 10; 

            // ==========================================================
            // 2. ê¸°íƒ€ í•­ëª© ì ìˆ˜ ê³„ì‚° (ì„ íƒ, ê°€ì , ê°ì )
            // ==========================================================
            let optionalScore = 0;
            let bonusScore = 0;
            let penaltyScore = 0;

            // 2-1. ì„ íƒ í•­ëª© (í•©ì‚°)
            optionalScore += parseInt(document.getElementById('education').value) || 0;
            optionalScore += parseInt(document.getElementById('assets').value) || 0;
            optionalScore += parseInt(document.getElementById('experience').value) || 0;
            
            // 2-2. ê°€ì  í•­ëª© (í•©ì‚°)
            bonusScore += parseInt(document.getElementById('kiip').value) || 0;
            if (document.getElementById('domestic_study').checked) bonusScore += 5;
            if (document.getElementById('certificate').checked) bonusScore += 5;
            if (document.getElementById('recommendation').checked) bonusScore += 5;
            bonusScore += parseInt(document.getElementById('long_term').value) || 0;
            
            // 2-3. ê°ì  í•­ëª© (í•©ì‚°)
            const violationCount = parseInt(document.getElementById('violation_count').value) || 0;
            if (violationCount >= 4) {
                penaltyScore = 50; // 4íšŒ ì´ìƒì€ ì „í™˜ ë¶ˆí—ˆ
            } else if (violationCount === 3 || violationCount === 2) {
                penaltyScore = 20;
            } else if (violationCount === 1) {
                penaltyScore = 10;
            }
            if (document.getElementById('crime_penalty').checked) {
                penaltyScore += 50; // ë²”ì£„ëŠ” ë³„ë„ ê°ì 
            }
            
            // 3. ìµœì¢… ê³„ì‚°
            const totalScore = incomeScore + koreanScore + ageScore + optionalScore + bonusScore - penaltyScore;
            
            // 4. í•„ìˆ˜ ìš”ê±´ í™•ì¸
            const isIncomeMinMet = incomeScore >= 50;
            const isKoreanMinMet = koreanScore >= 50;
            const isTotalScoreMet = totalScore >= 200;
            const isEligible = isIncomeMinMet && isKoreanMinMet && isTotalScoreMet && penaltyScore < 50; // 4íšŒ ì´ìƒ ìœ„ë°˜ ì‹œ ë¶ˆí—ˆ

            // 5. ê²°ê³¼ HTML ìƒì„±
            document.getElementById('final_score_value').innerText = totalScore;
            
            const detailsHtml = `
                <table class="detail-table">
                    <tr><th>êµ¬ë¶„</th><th>ì ìˆ˜</th><th>ìµœì†Œ í•„ìˆ˜</th><th>ì¶©ì¡±</th></tr>
                    <tr>
                        <td>ì†Œë“ (${(income / 10000).toLocaleString()}ë§Œì›)</td>
                        <td>${incomeScore}ì </td>
                        <td>50ì </td>
                        <td class="${isIncomeMinMet ? 'status-ok' : 'status-fail'}">${isIncomeMinMet ? 'âœ… ì¶©ì¡±' : 'âŒ ë¯¸ë‹¬'}</td>
                    </tr>
                    <tr>
                        <td>í•œêµ­ì–´ (${koreanLevel}ë‹¨ê³„)</td>
                        <td>${koreanScore}ì </td>
                        <td>50ì </td>
                        <td class="${isKoreanMinMet ? 'status-ok' : 'status-fail'}">${isKoreanMinMet ? 'âœ… ì¶©ì¡±' : 'âŒ ë¯¸ë‹¬'}</td>
                    </tr>
                    <tr>
                        <td>ë‚˜ì´ (${age}ì„¸)</td>
                        <td>${ageScore}ì </td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>**ì„ íƒ í•­ëª© ì´ì **</td>
                        <td>**${optionalScore}ì **</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                     <tr>
                        <td>**ê°€ì  ì´ì **</td>
                        <td>**+${bonusScore}ì **</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>**ê°ì  ì´ì **</td>
                        <td>**-${penaltyScore}ì **</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                </table>
            `;
            document.getElementById('score_details').innerHTML = detailsHtml;

            const eligibilityDiv = document.getElementById('eligibility_status');
            eligibilityDiv.classList.remove('eligible', 'not-eligible');
            
            if (penaltyScore >= 50) {
                 eligibilityDiv.innerText = "ğŸš¨ ë¶ˆí—ˆ ì‚¬ìœ  í•´ë‹¹: ì¶œì…êµ­ ê´€ë¦¬ë²• 4íšŒ ì´ìƒ ìœ„ë°˜ ë˜ëŠ” í˜•ì‚¬ ë²”ì£„ë¡œ ì „í™˜ ë¶ˆê°€";
                 eligibilityDiv.classList.add('not-eligible');
            } else if (isEligible) {
                eligibilityDiv.innerText = "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ëª¨ë“  í•„ìˆ˜ ìš”ê±´ì„ ì¶©ì¡±í•˜ì—¬ ì „í™˜ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.";
                eligibilityDiv.classList.add('eligible');
            } else {
                let reason = "âš ï¸ ìš”ê±´ ë¯¸ì¶©ì¡±";
                if (!isTotalScoreMet) reason += " (ì´ì  200ì  ë¯¸ë‹¬)";
                if (!isIncomeMinMet) reason += " (ì†Œë“ ìµœì†Œ ë¯¸ë‹¬)";
                if (!isKoreanMinMet) reason += " (í•œêµ­ì–´ ìµœì†Œ ë¯¸ë‹¬)";
                
                eligibilityDiv.innerText = reason;
                eligibilityDiv.classList.add('not-eligible');
            }
