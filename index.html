<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-7-4 ë¹„ì ì ìˆ˜ ê³„ì‚°ê¸°</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; padding: 15px; background-color: #f0f4f7; }
        .container { background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); max-width: 450px; margin: 0 auto; }
        h1 { text-align: center; color: #004d99; }
        h2 { color: #004d99; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px; margin-top: 20px; font-size: 1.2em; }
        label { display: block; margin-top: 15px; font-weight: bold; color: #333; }
        input[type="number"] { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        small { color: #888; font-size: 0.85em; margin-top: 3px; display: block; }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .button-group button { width: 100%; padding: 12px; margin-top: 15px; border: none; border-radius: 6px; cursor: pointer; font-size: 1.1em; transition: background-color 0.3s; }
        #calculateButton { background-color: #007bff; color: white; }
        #calculateButton:hover { background-color: #0056b3; }
        
        #newInputButton { background-color: #6c757d; color: white; }
        #newInputButton:hover { background-color: #5a6268; }


        /* ê²°ê³¼ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        #results { margin-top: 25px; padding: 15px; border: 1px solid #004d99; border-radius: 8px; background-color: #e9f7ff; }
        .final-score { font-size: 1.4em; font-weight: bold; color: #cc0000; margin: 10px 0; }
        .eligibility { font-size: 1.2em; font-weight: bold; padding: 10px; border-radius: 4px; text-align: center; margin-top: 15px; }
        .eligible { background-color: #d4edda; color: #155724; }
        .not-eligible { background-color: #f8d7da; color: #721c24; }
        .detail-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9em; }
        .detail-table th, .detail-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .detail-table th { background-color: #f0f0f0; }
        .status-ok { color: #28a745; font-weight: bold; }
        .status-fail { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>E-7-4 ë¹„ì ì ìˆ˜ ê³„ì‚°ê¸°</h1>
        
        <div id="input-area">
            <h2>1. í•„ìˆ˜ ê¸°ë³¸ í•­ëª© (ìµœëŒ€ 300ì )</h2>
            <label for="income">ì—°ê°„ í‰ê·  ì†Œë“ (ì›, ìµœê·¼ 2ë…„ í‰ê· ):</label>
            <input type="number" id="income" value="30000000" min="0">
            <small>â€» 2,500ë§Œì› ë¯¸ë§Œ ì‹œ 0ì  (ìµœì†Œ 50ì  í•„ìˆ˜)</small>

            <label for="korean_level">í•œêµ­ì–´ ëŠ¥ë ¥ (TOPIK ê¸‰ìˆ˜ ë˜ëŠ” KIIP ë‹¨ê³„):</label>
            <input type="number" id="korean_level" value="3" min="1" max="5">
            <small>â€» 2ê¸‰/2ë‹¨ê³„ ë¯¸ë§Œ ì‹œ 0ì  (ìµœì†Œ 50ì  í•„ìˆ˜)</small>

            <label for="age">ë§Œ ë‚˜ì´:</label>
            <input type="number" id="age" value="30" min="19">

            <h2>2. ê¸°íƒ€ í•­ëª©</h2>
            <label for="optional">ì„ íƒ í•­ëª© ì´ì  (í•™ë ¥, ìì‚°, ê²½ë ¥ ë“±):</label>
            <input type="number" id="optional" value="15" min="0" max="60">

            <label for="bonus">ê°€ì  ì´ì  (ì¶”ì²œ, ì¥ê¸°ê·¼ì† ë“±):</label>
            <input type="number" id="bonus" value="10" min="0" max="35">
            
            <label for="penalty">ê°ì  ì´ì  (ë²”ë²• ì‚¬ì‹¤ ë“±):</label>
            <input type="number" id="penalty" value="0" min="0" max="50">

            <div class="button-group">
                <button id="calculateButton" onclick="calculateScore()">E-7-4 ì ìˆ˜ ê³„ì‚°í•˜ê¸°</button>
            </div>
        </div>

        <div id="results" style="display:none;">
            <h2>3. ê³„ì‚° ê²°ê³¼ ë° ì§„ë‹¨</h2>
            <div id="score_details"></div>
            
            <div class="final-score">ì´ í•©ì‚° ì ìˆ˜: <span id="final_score_value">0</span>ì </div>
            <div id="eligibility_status" class="eligibility"></div>
            
            <button id="newInputButton" onclick="resetForm()">New (ìƒˆ ì…ë ¥ ì‹œì‘)</button>
        </div>
    </div>

    <script>
        // ì´ˆê¸° ì…ë ¥ê°’ ì„¤ì •
        const initialValues = {
            income: 30000000,
            korean_level: 3,
            age: 30,
            optional: 15,
            bonus: 10,
            penalty: 0
        };

        // E-7-4 ì ìˆ˜ ê³„ì‚° í•¨ìˆ˜
        function calculateScore() {
            // 1. INPUT ê°’ ê°€ì ¸ì˜¤ê¸°
            const income = parseInt(document.getElementById('income').value) || 0;
            const koreanLevel = parseInt(document.getElementById('korean_level').value) || 0;
            const age = parseInt(document.getElementById('age').value) || 0;
            const optional = parseInt(document.getElementById('optional').value) || 0;
            const bonus = parseInt(document.getElementById('bonus').value) || 0;
            const penalty = parseInt(document.getElementById('penalty').value) || 0;

            // 2. ì ìˆ˜ ë¡œì§ 
            
            // ì†Œë“ ì ìˆ˜
            let incomeScore = 0;
            if (income >= 40000000) incomeScore = 120;
            else if (income >= 35000000) incomeScore = 90;
            else if (income >= 30000000) incomeScore = 70;
            else if (income >= 25000000) incomeScore = 50;
            else incomeScore = 0;

            // í•œêµ­ì–´ ì ìˆ˜
            let koreanScore = 0;
            if (koreanLevel >= 4) koreanScore = 120;
            else if (koreanLevel === 3) koreanScore = 80;
            else if (koreanLevel === 2) koreanScore = 50;
            else koreanScore = 0;

            // ë‚˜ì´ ì ìˆ˜
            let ageScore = 0;
            if (age >= 19 && age <= 26) ageScore = 60;
            else if (age >= 27 && age <= 33) ageScore = 50;
            else if (age >= 34 && age <= 40) ageScore = 30;
            else if (age >= 41) ageScore = 10; 
            
            // 3. ìµœì¢… ê³„ì‚°
            const totalScore = incomeScore + koreanScore + ageScore + optional + bonus - penalty;
            
            // 4. í•„ìˆ˜ ìš”ê±´ í™•ì¸
            const isIncomeMinMet = incomeScore >= 50;
            const isKoreanMinMet = koreanScore >= 50;
            const isTotalScoreMet = totalScore >= 200;
            const isEligible = isIncomeMinMet && isKoreanMinMet && isTotalScoreMet;

            // 5. ê²°ê³¼ HTML ìƒì„±
            document.getElementById('final_score_value').innerText = totalScore;
            
            const detailsHtml = `
                <table class="detail-table">
                    <tr><th>êµ¬ë¶„</th><th>ë“ì  ì ìˆ˜</th><th>ìµœì†Œ í•„ìˆ˜ ì ìˆ˜</th><th>ì¶©ì¡±</th></tr>
                    <tr>
                        <td>ì†Œë“ (${(income / 10000).toLocaleString()}ë§Œì›)</td>
                        <td>${incomeScore}ì </td>
                        <td>50ì </td>
                        <td class="${isIncomeMinMet ? 'status-ok' : 'status-fail'}">${isIncomeMinMet ? 'âœ… ì¶©ì¡±' : 'âŒ ë¯¸ë‹¬'}</td>
                    </tr>
                    <tr>
                        <td>í•œêµ­ì–´ (${koreanLevel}ë‹¨ê³„)</td>
                        <td>${koreanScore}ì </td>
                        <td>50ì </td>
                        <td class="${isKoreanMinMet ? 'status-ok' : 'status-fail'}">${isKoreanMinMet ? 'âœ… ì¶©ì¡±' : 'âŒ ë¯¸ë‹¬'}</td>
                    </tr>
                    <tr>
                        <td>ë‚˜ì´ (${age}ì„¸)</td>
                        <td>${ageScore}ì </td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>ì„ íƒ í•­ëª©</td>
                        <td>${optional}ì </td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>ê°€ì /ê°ì </td>
                        <td>+${bonus}ì  / -${penalty}ì </td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                </table>
            `;
            document.getElementById('score_details').innerHTML = detailsHtml;

            const eligibilityDiv = document.getElementById('eligibility_status');
            eligibilityDiv.classList.remove('eligible', 'not-eligible');
            
            if (isEligible) {
                eligibilityDiv.innerText = "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ëª¨ë“  í•„ìˆ˜ ìš”ê±´ì„ ì¶©ì¡±í•˜ì—¬ ì „í™˜ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.";
                eligibilityDiv.classList.add('eligible');
            } else {
                let reason = "âš ï¸ ìš”ê±´ ë¯¸ì¶©ì¡±";
                if (!isTotalScoreMet) reason += " (ì´ì  200ì  ë¯¸ë‹¬)";
                if (!isIncomeMinMet) reason += " (ì†Œë“ ìµœì†Œ ë¯¸ë‹¬)";
                if (!isKoreanMinMet) reason += " (í•œêµ­ì–´ ìµœì†Œ ë¯¸ë‹¬)";
                
                eligibilityDiv.innerText = reason;
                eligibilityDiv.classList.add('not-eligible');
            }
            
            // ê³„ì‚° í›„ ê²°ê³¼ ì˜ì—­ ë³´ì´ê¸°
            document.getElementById('results').style.display = 'block';
            // ì…ë ¥ ì˜ì—­ ìŠ¤í¬ë¡¤ì„ ê²°ê³¼ ì˜ì—­ìœ¼ë¡œ ì´ë™ (íœ´ëŒ€í° ì‚¬ìš© í¸ì˜ì„±)
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });

        }

        // ì…ë ¥ í¼ ì´ˆê¸°í™” í•¨ìˆ˜ (New ë²„íŠ¼ í´ë¦­ ì‹œ)
        function resetForm() {
            // 1. ì…ë ¥ í•„ë“œ ì´ˆê¸°ê°’ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°
            document.getElementById('income').value = initialValues.income;
            document.getElementById('korean_level').value = initialValues.korean_level;
            document.getElementById('age').value = initialValues.age;
            document.getElementById('optional').value = initialValues.optional;
            document.getElementById('bonus').value = initialValues.bonus;
            document.getElementById('penalty').value = initialValues.penalty;
            
            // 2. ê²°ê³¼ ì˜ì—­ ìˆ¨ê¸°ê¸°
            document.getElementById('results').style.display = 'none';

            // 3. ì…ë ¥ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì´ë™
            document.getElementById('input-area').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>