<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-7-4 ë¹„ì ì ìˆ˜ ê³„ì‚°ê¸° (ìµœì‹  ê°œì • í†µí•©ë³¸)</title>
    <style>
        /* CSS ìŠ¤íƒ€ì¼ ì‹œì‘ */
        body { font-family: 'Malgun Gothic', sans-serif; padding: 15px; background-color: #f0f4f7; }
        .container { background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); max-width: 450px; margin: 0 auto; }
        h1 { text-align: center; color: #004d99; }
        h2 { color: #004d99; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px; margin-top: 20px; font-size: 1.2em; }
        label { display: block; margin-top: 15px; font-weight: bold; color: #333; }
        input[type="number"], select { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        small { color: #888; font-size: 0.85em; margin-top: 3px; display: block; }
        .checkbox-group { display: flex; align-items: center; margin-top: 10px; }
        .checkbox-group label { margin-top: 0; font-weight: normal; }
        .checkbox-group input { width: auto; margin-right: 10px; }
        .button-group button { width: 100%; padding: 12px; margin-top: 15px; border: none; border-radius: 6px; cursor: pointer; font-size: 1.1em; transition: background-color 0.3s; }
        #calculateButton { background-color: #007bff; color: white; }
        #newInputButton { background-color: #6c757d; color: white; }
        #results { margin-top: 25px; padding: 15px; border: 1px solid #004d99; border-radius: 8px; background-color: #e9f7ff; }
        .final-score { font-size: 1.4em; font-weight: bold; color: #cc0000; margin: 10px 0; }
        .eligibility { font-size: 1.2em; font-weight: bold; padding: 10px; border-radius: 4px; text-align: center; margin-top: 15px; }
        .eligible { background-color: #d4edda; color: #155724; }
        .not-eligible { background-color: #f8d7da; color: #721c24; }
        .detail-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9em; }
        .detail-table th, .detail-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .detail-table th { background-color: #f0f0f0; }
        .status-ok { color: #28a745; font-weight: bold; }
        .status-fail { color: #dc3545; font-weight: bold; }
        /* CSS ìŠ¤íƒ€ì¼ ë */
    </style>
</head>
<body>
    <div class="container">
        <h1>E-7-4 ë¹„ì ì ìˆ˜ ê³„ì‚°ê¸° (ìµœì‹  ê°œì •)</h1>
        <small style="text-align: center; display: block; color: red;">â€» ì´ì  300ì  ë§Œì  / í•©ê²© ê¸°ì¤€ 200ì  ì´ìƒ</small>
        
        <div id="input-area">
            
            <h2>1. ê¸°ë³¸ í•­ëª© (ìë™ ê³„ì‚°, ìµœëŒ€ 300ì )</h2>
            
            <label for="income">ì—°ê°„ í‰ê·  ì†Œë“ (ì›, ìµœê·¼ 2ë…„ í‰ê· ):</label>
            <input type="number" id="income" value="30000000" min="25000000">
            <small>â€» ìµœì†Œ 2,500ë§Œì› ì´ìƒ í•„ìˆ˜ (ìµœì†Œ 50ì )</small>

            <label for="korean_level">í•œêµ­ì–´ ëŠ¥ë ¥ (TOPIK/KIIP ë‹¨ê³„):</label>
            <select id="korean_level">
                <option value="1">ì„ íƒ ì•ˆí•¨/1ê¸‰/1ë‹¨ê³„ (0ì )</option>
                <option value="2">2ê¸‰/2ë‹¨ê³„ (50ì ) - ìµœì†Œ í•„ìˆ˜</option>
                <option value="3" selected>3ê¸‰/3ë‹¨ê³„ (80ì )</option>
                <option value="4">4ê¸‰/4ë‹¨ê³„ ì´ìƒ (120ì )</option>
            </select>
            <small>â€» 2ê¸‰/2ë‹¨ê³„ ì´ìƒ í•„ìˆ˜ (ìµœì†Œ 50ì )</small>

            <label for="age">ë§Œ ë‚˜ì´:</label>
            <input type="number" id="age" value="30" min="19">
            <small>â€» 27ì„¸~33ì„¸ê°€ 60ì ìœ¼ë¡œ ìµœê³ ì </small>
            
            <input type="hidden" id="career" value="0"> 

            <h2>2. ê°€ì  í•­ëª© (í•­ëª©ë³„ ì„ íƒ, ìµœëŒ€ 110ì  ì´ìƒ)</h2>
            
            <label>ê°€. ì¶”ì²œ ë° ê³ ìš© ê¸°ì—¬ë„ (ì¤‘ë³µ ê°€ëŠ¥):</label>
            <div class="checkbox-group">
                <input type="checkbox" id="rec_central"> <label for="rec_central">ì¤‘ì•™ë¶€ì²˜ ì¶”ì²œ (+30ì )</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="rec_local"> <label for="rec_local">ê´‘ì—­ ì§€ìì²´ ì¶”ì²œ (+30ì )</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="rec_corp"> <label for="rec_corp">í˜„ì¬ ê³ ìš© ê¸°ì—…ì²´ ì¶”ì²œ (+50ì )</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="long_service"> <label for="long_service">í˜„ ê·¼ë¬´ì²˜ 3ë…„ ì´ìƒ ê·¼ì† (+20ì )</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="local_area_work"> <label for="local_area_work">ì¸êµ¬ê°ì†Œ/ìë©´ì§€ì—­ 3ë…„ ì´ìƒ ê·¼ë¬´ (+20ì )</label>
            </div>
            
            <label style="margin-top: 25px;">ë‚˜. ê¸°ìˆ  ë° ê¸°íƒ€ í•­ëª© (ì¤‘ë³µ ê°€ëŠ¥):</label>
            <div class="checkbox-group">
                <input type="checkbox" id="tech_degree"> <label for="tech_degree">ê¸°ìˆ  ìê²©ì¦ ë˜ëŠ” êµ­ë‚´ í•™ìœ„ (+20ì )</label>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="driving_license"> <label for="driving_license">êµ­ë‚´ ìš´ì „ë©´í—ˆì¦ ë³´ìœ  (+10ì )</label>
            </div>
            
            <h2 style="color: #dc3545;">3. ê°ì  ë° ì œì™¸ í•­ëª©</h2>

            <label for="fine_count">ë²Œê¸ˆí˜• (100ë§Œì› ë¯¸ë§Œ) íšŸìˆ˜:</label>
            <input type="number" id="fine_count" value="0" min="0" max="3">
            <small>â€» 1íšŒ: -5ì , 3íšŒ: -20ì </small>

            <label for="tax_arrear_count">ì¡°ì„¸ ì²´ë‚©ìœ¼ë¡œ ì²´ë¥˜í—ˆê°€ ì œí•œë°›ì€ íšŸìˆ˜:</label>
            <input type="number" id="tax_arrear_count" value="0" min="0" max="3">
            <small>â€» 1íšŒ: -5ì , 3íšŒ: -15ì </small>

            <label for="violation_count">ì¶œì…êµ­ê´€ë¦¬ë²• ìœ„ë°˜ íšŸìˆ˜ (3íšŒ ì´í•˜):</label>
            <input type="number" id="violation_count" value="0" min="0" max="3">
            <small>â€» 4íšŒ ì´ìƒ ìœ„ë°˜ ì‹œ ì¦‰ì‹œ ë¶ˆí—ˆë©ë‹ˆë‹¤.</small>
            
            <div class="checkbox-group" style="margin-top: 15px;">
                <input type="checkbox" id="major_penalty"> <label for="major_penalty" style="color: #dc3545; font-weight: bold;">[ì œì™¸] ë²Œê¸ˆ 100ë§Œì› ì´ìƒ ë˜ëŠ” ì¤‘ëŒ€ ë²”ì£„ ì´ë ¥ (-50ì )</label>
            </div>

            <div class="button-group">
                <button id="calculateButton" onclick="calculateScore()">E-7-4 ì ìˆ˜ ê³„ì‚° ë° ì§„ë‹¨í•˜ê¸°</button>
            </div>
        </div>

        <div id="results" style="display:none;">
            <h2>4. ìµœì¢… ê³„ì‚° ê²°ê³¼ ë° ì§„ë‹¨ (ê¸°ì¤€ 200ì )</h2>
            <div id="score_details"></div>
            
            <div class="final-score">ì´ í•©ì‚° ì ìˆ˜: <span id="final_score_value">0</span>ì </div>
            <div id="eligibility_status" class="eligibility"></div>
            
            <button id="newInputButton" onclick="resetForm()">ìƒˆ ì…ë ¥ ì‹œì‘</button>
        </div>
        
        <footer style="text-align: center; margin-top: 30px; padding-top: 15px; border-top: 1px solid #ddd;">
            <p style="font-size: 0.9em; color: #555;">
                **ë¹„ì ì „ë¬¸ ìƒë‹´ ë¬¸ì˜:**
                <br>
                ë²•ë¬´ë²•ì¸ ëŒ€ë¦¼ ğŸ“ **010-9778-1100**
            </p>
        </footer>
        </div>

    <script>
        // E-7-4 ì ìˆ˜ ê³„ì‚° ë¡œì§
        function calculateScore() {
            // ==========================================================
            // 1. ì…ë ¥ ê°’ íŒŒì‹± (HTML ID ê¸°ë°˜)
            // ==========================================================
            const income = parseInt(document.getElementById('income').value) || 0;
            const koreanLevel = parseInt(document.getElementById('korean_level').value) || 0;
            const age = parseInt(document.getElementById('age').value) || 0;
            
            // ê°€ì  ì²´í¬ë°•ìŠ¤
            const recCentral = document.getElementById('rec_central').checked;
            const recLocal = document.getElementById('rec_local').checked;
            const recCorp = document.getElementById('rec_corp').checked;
            const longService = document.getElementById('long_service').checked;
            const localAreaWork = document.getElementById('local_area_work').checked;
            const techDegree = document.getElementById('tech_degree').checked;
            const drivingLicense = document.getElementById('driving_license').checked;

            // ê°ì  ì…ë ¥
            const fineCount = parseInt(document.getElementById('fine_count').value) || 0;
            const taxArrearCount = parseInt(document.getElementById('tax_arrear_count').value) || 0;
            const violationCount = parseInt(document.getElementById('violation_count').value) || 0;
            const majorPenalty = document.getElementById('major_penalty').checked;
            
            let incomeScore = 0;
            let koreanScore = 0;
            let ageScore = 0;
            let bonusScore = 0;
            let penaltyScore = 0;
            let totalScore = 0;
            
            const REQUIRED_MIN_SCORE = 200;
            const REQUIRED_MIN_POINT = 50; 

            // ==========================================================
            // 2. ê¸°ë³¸ í•­ëª© ì ìˆ˜ ê³„ì‚° (ìµœëŒ€ 300ì )
            // ==========================================================
            
            // 2-1. ì†Œë“ ì ìˆ˜ (ìµœëŒ€ 120ì )
            if (income >= 50000000) incomeScore = 120;
            else if (income >= 45000000) incomeScore = 110;
            else if (income >= 40000000) incomeScore = 95;
            else if (income >= 35000000) incomeScore = 80;
            else if (income >= 30000000) incomeScore = 65;
            else if (income >= 25000000) incomeScore = 50;

            // 2-2. í•œêµ­ì–´ ì ìˆ˜ (ìµœëŒ€ 120ì )
            if (koreanLevel >= 4) koreanScore = 120;
            else if (koreanLevel === 3) koreanScore = 80;
            else if (koreanLevel === 2) koreanScore = 50;
            
            // 2-3. ë‚˜ì´ ì ìˆ˜ (ìµœëŒ€ 60ì )
            if (age >= 27 && age <= 33) ageScore = 60;
            else if (age >= 19 && age <= 26) ageScore = 40;
            else if (age >= 34 && age <= 40) ageScore = 30;
            else if (age >= 41) ageScore = 10;
            
            // ==========================================================
            // 3. ê°€ì  í•­ëª© ì ìˆ˜ ê³„ì‚°
            // ==========================================================
            
            // ì¶”ì²œ (ì¤‘ì•™ë¶€ì²˜/ì§€ìì²´ ì¤‘ ìµœëŒ€ 30ì )
            let recMax = 0;
            if (recCentral || recLocal) {
                recMax = 30;
            }
            bonusScore += recMax;
            
            // ê¸°ì—…ì²´ ì¶”ì²œ
            bonusScore += recCorp ? 50 : 0;
            
            // ê¸°íƒ€ ê°€ì 
            bonusScore += longService ? 20 : 0;
            bonusScore += localAreaWork ? 20 : 0;
            bonusScore += techDegree ? 20 : 0;
            bonusScore += drivingLicense ? 10 : 0;
            
            // ==========================================================
            // 4. ê°ì  í•­ëª© ì ìˆ˜ ê³„ì‚°
            // ==========================================================
            
            // 4-1. ë²Œê¸ˆí˜• (100ë§Œì› ë¯¸ë§Œ)
            if (fineCount === 1) penaltyScore += 5;
            else if (fineCount === 2) penaltyScore += 10;
            else if (fineCount >= 3) penaltyScore += 20;

            // 4-2. ì¡°ì„¸ ì²´ë‚© (ì²´ë¥˜ í—ˆê°€ ì œí•œ ì‚¬ì‹¤)
            if (taxArrearCount === 1) penaltyScore += 5;
            else if (taxArrearCount === 2) penaltyScore += 10;
            else if (taxArrearCount >= 3) penaltyScore += 15;
            
            // 4-3. ì¶œì…êµ­ê´€ë¦¬ë²• ìœ„ë°˜ (3íšŒ ì´í•˜)
            if (violationCount === 1) penaltyScore += 5;
            else if (violationCount === 2) penaltyScore += 10;
            else if (violationCount >= 3) penaltyScore += 15;
            
            // 4-4. ì¤‘ëŒ€ ì œì™¸ ì‚¬ìœ  (ë²Œê¸ˆ 100ë§Œì› ì´ìƒ, 4íšŒ ì´ìƒ ìœ„ë°˜ ë“±)
            let majorFailure = false;
            if (majorPenalty || violationCount > 3) {
                 penaltyScore += 50; // ë¶ˆí—ˆ ì‚¬ìœ ëŠ” 50ì ìœ¼ë¡œ ê°„ì£¼í•˜ì—¬ ìµœì¢… ì§„ë‹¨ì— ì‚¬ìš©
                 majorFailure = true;
            }

            // 5. ìµœì¢… ê³„ì‚°
            totalScore = incomeScore + koreanScore + ageScore + bonusScore - penaltyScore;
            
            // 6. í•„ìˆ˜ ìš”ê±´ í™•ì¸
            const isIncomeMinMet = incomeScore >= REQUIRED_MIN_POINT;
            const isKoreanMinMet = koreanScore >= REQUIRED_MIN_POINT;
            const isTotalScoreMet = totalScore >= REQUIRED_MIN_SCORE;
            const isEligible = isIncomeMinMet && isKoreanMinMet && isTotalScoreMet && !majorFailure;

            // 7. ìµœì¢… ì§„ë‹¨ ì¶œë ¥
            
            // 7-1. ìƒì„¸ ì ìˆ˜ í…Œì´ë¸” ìƒì„±
            const detailsHtml = `
                <table class="detail-table">
                    <tr><th>êµ¬ë¶„</th><th>ì ìˆ˜</th><th>ìµœì†Œ í•„ìˆ˜</th><th>ì¶©ì¡±</th></tr>
                    <tr>
                        <td>ì†Œë“ (${(income / 10000).toLocaleString()}ë§Œì›)</td>
                        <td>${incomeScore}ì </td>
                        <td>50ì </td>
                        <td class="${isIncomeMinMet ? 'status-ok' : 'status-fail'}">${isIncomeMinMet ? 'âœ… ì¶©ì¡±' : 'âŒ ë¯¸ë‹¬'}</td>
                    </tr>
                    <tr>
                        <td>í•œêµ­ì–´ (${koreanLevel}ë‹¨ê³„)</td>
                        <td>${koreanScore}ì </td>
                        <td>50ì </td>
                        <td class="${isKoreanMinMet ? 'status-ok' : 'status-fail'}">${isKoreanMinMet ? 'âœ… ì¶©ì¡±' : 'âŒ ë¯¸ë‹¬'}</td>
                    </tr>
                    <tr>
                        <td>ë‚˜ì´ (${age}ì„¸)</td>
                        <td>${ageScore}ì </td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>**ê°€ì  ì´ì **</td>
                        <td>**+${bonusScore}ì **</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>**ê°ì  ì´ì **</td>
                        <td style="color: red;">**-${penaltyScore}ì **</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                </table>
            `;
            document.getElementById('score_details').innerHTML = detailsHtml;

            // 7-2. ìµœì¢… ì§„ë‹¨ ìƒíƒœ ì¶œë ¥
            const eligibilityDiv = document.getElementById('eligibility_status');
            eligibilityDiv.classList.remove('eligible', 'not-eligible');
            
            let diagnosisStatus = '';

            if (majorFailure) {
                diagnosisStatus = "ğŸš¨ ë¶ˆí—ˆ ì‚¬ìœ  í•´ë‹¹: ë²Œê¸ˆ 100ë§Œì› ì´ìƒ ë˜ëŠ” ì¶œì…êµ­ ê´€ë¦¬ë²• 4íšŒ ì´ìƒ ìœ„ë°˜ ë“±ìœ¼ë¡œ ì „í™˜ ë¶ˆê°€";
                eligibilityDiv.classList.add('not-eligible');
            } else if (isEligible) {
                diagnosisStatus = "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ëª¨ë“  í•„ìˆ˜ ìš”ê±´ì„ ì¶©ì¡±í•˜ì—¬ ì „í™˜ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. (ì´ì  200ì  ì´ìƒ)";
                eligibilityDiv.classList.add('eligible');
            } else {
                let reason = "âš ï¸ ìš”ê±´ ë¯¸ì¶©ì¡±";
                if (!isTotalScoreMet) reason += " (ì´ì  200ì  ë¯¸ë‹¬)";
                if (!isIncomeMinMet) reason += " (ì†Œë“ ìµœì†Œ 50ì  ë¯¸ë‹¬)";
                if (!isKoreanMinMet) reason += " (í•œêµ­ì–´ ìµœì†Œ 50ì  ë¯¸ë‹¬)";
                
                diagnosisStatus = reason;
                eligibilityDiv.classList.add('not-eligible');
            }

            // 7-3. ìµœì¢… ì ìˆ˜ ë° ì§„ë‹¨ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('final_score_value').innerText = totalScore;
            eligibilityDiv.innerText = diagnosisStatus;
            
            // 7-4. ê²°ê³¼ ì˜ì—­ ë³´ì´ê¸°
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        // ì´ˆê¸° ì…ë ¥ê°’ ì„¤ì •
        const initialValues = {
            income: 30000000,
            korean_level: 3,
            age: 30,
            fine_count: 0,
            tax_arrear_count: 0,
            violation_count: 0
        };
        
        // ì…ë ¥ í¼ ì´ˆê¸°í™” í•¨ìˆ˜ (New ë²„íŠ¼ í´ë¦­ ì‹œ)
        function resetForm() {
            // 1. ì…ë ¥ í•„ë“œ ì´ˆê¸°ê°’ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°
            document.getElementById('income').value = initialValues.income;
            document.getElementById('korean_level').value = initialValues.korean_level;
            document.getElementById('age').value = initialValues.age;
            document.getElementById('fine_count').value = initialValues.fine_count;
            document.getElementById('tax_arrear_count').value = initialValues.tax_arrear_count;
            document.getElementById('violation_count').value = initialValues.violation_count;
            
            // ë“œë¡­ë‹¤ìš´ ë° ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
            document.getElementById('korean_level').value = '3'; // ê¸°ë³¸ê°’ 3ë‹¨ê³„
            document.getElementById('rec_central').checked = false;
            document.getElementById('rec_local').checked = false;
            document.getElementById('rec_corp').checked = false;
            document.getElementById('long_service').checked = false;
            document.getElementById('local_area_work').checked = false;
            document.getElementById('tech_degree').checked = false;
            document.getElementById('driving_license').checked = false;
            document.getElementById('major_penalty').checked = false;
            document.getElementById('career').value = '0'; // Hidden field ì´ˆê¸°í™”
            
            // 2. ê²°ê³¼ ì˜ì—­ ìˆ¨ê¸°ê¸°
            document.getElementById('results').style.display = 'none';

            // 3. ì…ë ¥ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì´ë™
            document.getElementById('input-area').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>